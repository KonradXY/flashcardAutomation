<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308716 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="426"/>

<div>
<span><div><h2><span style="font-size: 14pt;">6 - Proxy Pattern</span></h2><div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>D:    </div><div>Can you give the gof definition of the proxy pattern? </div><div>Can you explain the purpose of the proxy pattern ?</div><div>can you give the uml diagram of the proxy pattern?</div><div><br/></div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>R:    </div><div>Provide a surrogate or placeholder for another object to control access to it.</div><div>A proxy is basically a substitute for an intended object. Access to the original object is not always possible due to many factors. For example, it is expensive to create, it is in need of being secured, it resides in a remote location, and so forth. The proxy design pattern helps us in similar contexts. When a client deals with a proxy object, it assumes that it is talking to the actual object. So, in this pattern, you may want to use a class that can perform as an interface to something else.</div><div><br/></div><div><br/></div><div style="text-align: center;"><img src="6 - Proxy Pattern_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" width="296"/></div></td></tr></tbody></table><div><br/></div></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>D:   Can you give an implementation of the proxy pattern ?</div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>R:    Here’s the implementation.</div><div><br/></div><div><span style="font-family: &quot;Source Code Pro&quot;;">package jdp2e.proxy.demo;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">// Abstract class Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">abstract class Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     public abstract void doSomeWork();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">// ConcreteSubject class</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class ConcreteSubject extends Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     @Override</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     public void doSomeWork()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;doSomeWork() inside ConcreteSubject is invoked.&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">/**</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* Proxy Class: It will try to invoke the doSomeWork()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* of a ConcreteSubject instance</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">*/</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">Class Proxy extends  Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     static Subject</span> <span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span><span style="font-family: &quot;Source Code Pro&quot;;">;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     @Override</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     public void doSomeWork()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Proxy call happening now...&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           //Lazy initialization:We'll not instantiate until the method is //called</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           if (</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span> <span style="font-family: &quot;Source Code Pro&quot;;">== null)</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                 </span> <span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span> <span style="font-family: &quot;Source Code Pro&quot;;">= new ConcreteSubject();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           </span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span><span style="font-family: &quot;Source Code Pro&quot;;">.doSomeWork();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">/**</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* The client is talking to a ConcreteSubject instance</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* through a proxy method.</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">*/</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">public class ProxyPatternExample {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     public static void main(String[] args) {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;***Proxy Pattern Demo***\n&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           Proxy px = new Proxy();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">           px.doSomeWork();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:   Using the proxy pattern (but not just in this case) with a lazy instantiation technique , you may create unnecessary objects in a multithreaded application. Is this correct?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R:    Yes. In this book, I am presenting simple illustrations only, so I have ignored that part. In the discussions on the singleton pattern, I analyzed some alternative approaches to deal with a multithreaded environment. You can always refer to those discussions in situations like this. </div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:   Can you give an example of a remote proxy?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R:    With the help of remote proxies, you can call the method on the proxy object, which in turn forwards the call to the actual object that is running on the remote machine. <img src="6 - Proxy Pattern_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; -webkit-font-smoothing: antialiased; border: 0px; height: 15.37em; max-width: 100%; vertical-align: middle; margin: 0px; padding: 2px;" width="514"/></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:   When can you use a virtual proxy?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div><span style="color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">R:    It can be used to avoid multiple loadings of an extremely large image.</span></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:   When can you use a protection proxy?</div><div><br/></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R:    Consider the following example, which is basically a modified version of the proxy pattern implementation described earlier. For simplicity, let’s assume that at present, we have only three registered users who can exercise the doSomeWork() proxy method. A part from them, if any other user (say, Robin) tries to invoke the method, the system will reject those attempts. You must agree, when the system will reject this kind of unwanted access; there is no point in making a proxy object. So, if you avoid instantiating an object of ConcreteSubject in the Proxy class constructor, you can easily avoid these kinds of additional objects creation.</div><div><br/></div><div><span style="font-family: &quot;Source Code Pro&quot;;">package jdp2e.proxy.modified.demo;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">import java.util.ArrayList;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">import java.util.Arrays;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">import java.util.List;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Abstract class Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">abstract class Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public abstract void doSomeWork();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//ConcreteSubject class</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class ConcreteSubject extends Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      @Override</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public void doSomeWork()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;doSomeWork() inside ConcreteSubject is invoked.&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">/**</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* Proxy Class:It will try to invoke the doSomeWork()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* of a ConcreteSubject instance</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">*/</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class ModifiedProxy extends  Subject</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      static Subject</span> <span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span><span style="font-family: &quot;Source Code Pro&quot;;">;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      String currentUser;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      List&lt;String&gt; registeredUsers;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      //Or, simply create this mutable list in one step</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      /*List&lt;String&gt; registeredUsers=new ArrayList&lt;String&gt;(Arrays.asList( &quot;Admin&quot;,&quot;Rohit&quot;,&quot;Sam&quot;));*/</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public ModifiedProxy(String currentUser)</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //Registered users are Admin, Rohit and Sam only .</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             registeredUsers = new ArrayList&lt;String&gt;();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             registeredUsers.add(&quot;Admin&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             registeredUsers.add(&quot;Rohit&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             registeredUsers.add(&quot;Sam&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             this.currentUser = currentUser;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      @Override</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public void doSomeWork()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;\n Proxy call happening now...&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(currentUser+&quot; wants to invoke a proxy method.&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             if (registeredUsers.contains(currentUser))</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                    //Lazy initialization:We'll not instantiate until the</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                    //method is called</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                    if (</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span> <span style="font-family: &quot;Source Code Pro&quot;;">== null)</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                    {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                           </span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span> <span style="font-family: &quot;Source Code Pro&quot;;">= new ConcreteSubject();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                    }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                    //Allow the registered user to invoke the method</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                   </span> <span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">cs</span><span style="font-family: &quot;Source Code Pro&quot;;">.doSomeWork();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             else</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">                    System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Sorry &quot;+ currentUser+ &quot; , you do not have access rights.&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">/**</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* The client is talking to a ConcreteSubject instance</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">* through a proxy method.</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">*/</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">public class ModifiedProxyPatternExample {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public static void main(String[] args) {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;***Modified Proxy Pattern Demo***\n&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //Admin is an authorized user</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             ModifiedProxy px1 = new ModifiedProxy(&quot;Admin&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             px1.doSomeWork();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //Robin is an unauthorized user</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             ModifiedProxy px2 = new ModifiedProxy(&quot;Robin&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             px2.doSomeWork();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:   Proxies act like decorators. Is this correct?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R:    You can implement a protection proxy similar to decorators but you should not forget the intent. Decorators focus on adding responsibilities, but proxies focus on controlling the access to an object. Proxies differ from each other with their types and implementations. <span style="font-style: italic;">Also, in general, proxies work on the same interface but decorators can work on extended interfaces</span>. So, if you can remember their purposes, in most cases, you can clearly distinguish them from decorators.<br/></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:   What are the cons associated with proxies?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R:    If you are careful enough in your implementation, the pros are much greater than the cons, but</div><ul><li><div>You can raise your concern about the response time. Since you are not directly talking to the actual object, it is possible that the response time through these proxies is longer.</div></li><li><div>You need to maintain additional code for the proxies.</div></li><li><div>A proxy can hide the actual responses from objects, which may create confusion in special scenarios.</div></li></ul></td></tr></tbody></table><div><br/></div></div></div><div><br/></div></span>
</div></body></html> 