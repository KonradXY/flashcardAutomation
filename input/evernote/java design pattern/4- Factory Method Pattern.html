<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308716 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="416"/>

<div>
<span><div><font style="font-size: 14pt;"><b>4 - Factory Method </b></font></div><div><br/></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>D:    </div><div>Could you give the gof definition of the factory method pattern ? </div><div>When do I need the factory method pattern ? </div><div>could you give an uml diagram of the factory method pattern ?</div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>R:     </div><div>Define an interface for creating an object, but let subclasses decide which class to instantiate. Factory method lets a class defer instantiation to subclasses.</div><div>Whenever you want to define a bast structure of the application and let the subclasses that derive from this abstract class perform the actual instantiation process.</div><div style="text-align: center;"><img src="4- Factory Method Pattern_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; -webkit-font-smoothing: antialiased; border: 0px; height: 25.82em; max-width: 100%; vertical-align: middle; margin: 0px; padding: 2px;" width="722"/></div></td></tr></tbody></table><div><br/></div></div><div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-size: 10pt;">D:    could you give an implementation of the factory method pattern ?</span></div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>R:     Here’s the implementation.</div><div><br/></div><div><span style="font-family: &quot;Source Code Pro&quot;;">package jdp2e.factorymethod.demo;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">interface Animal</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      void speak();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      void preferredAction();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class Dog implements Animal</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public void speak()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Dog says: Bow-Wow.&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public void preferredAction()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Dogs prefer barking...\n&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class Tiger implements Animal</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public void speak()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Tiger says: Halum.&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public void preferredAction()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Tigers prefer hunting...\n&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">abstract class AnimalFactory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">/*Remember that the GoF definition says &quot;....Factory method lets a class defer instantiation to subclasses.&quot;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">In our case, the following method will create a Tiger or Dog but at this point it does not know whether it will get a Dog or a Tiger. This decision will be taken by the subclasses i.e. DogFactory or TigerFactory. So,in this implementation, the following method is playing the role of a factory (of creation)*/</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public abstract Animal createAnimal();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class DogFactory extends AnimalFactory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public Animal createAnimal()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //Creating a Dog</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             return new Dog();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class TigerFactory extends AnimalFactory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public Animal createAnimal()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //Creating a Tiger</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             return new Tiger();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class FactoryMethodPatternExample {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public static void main(String[] args) {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;***Factory Pattern Demo***\n&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a Tiger Factory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             AnimalFactory tigerFactory =new TigerFactory();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a tiger using the Factory Method</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             Animal aTiger = tigerFactory.createAnimal();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             aTiger.speak();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             aTiger.preferredAction();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a DogFactory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             AnimalFactory dogFactory = new DogFactory();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a dog using the Factory Method</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             Animal aDog = dogFactory.createAnimal();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             aDog.speak();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             aDog.preferredAction();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><h3>NB: MODIFIED IMPLEMENTATION</h3><div>In this implementation, the AnimalFactory class is an abstract class. The following are the key characteristics of the design.</div><ul><li><div>Only AnimalFactory is modified as follows (i.e., I am introducing a new makeAnimal() method).</div></li></ul><div><br/></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Modifying the AnimalFactory class.</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">abstract class AnimalFactory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public Animal makeAnimal()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">     System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;I am inside makeAnimal() of AnimalFactory.You cannot ignore my rules.&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       /*</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       At this point, it doesn't know whether it will get a Dog or a Tiger. It will be decided by the subclasses i.e.DogFactory or TigerFactory.But it knows that it will Speak and it will have a preferred way of Action.</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       */</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       Animal animal = createAnimal();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       animal.speak();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       animal.preferredAction();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       return animal;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">/*Remember that the GoF definition says &quot;....Factory method lets a class defer instantiation to subclasses.&quot;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">In our case, the following method will create a Tiger or Dog but at this point it does not know whether it will get a Dog or a Tiger.</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">This decision will be taken by the subclasses i.e. DogFactory or TigerFactory. So,in this implementation, the following method is playing the role of a factory (of creation)*/</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">    public abstract Animal createAnimal();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><ul><li><div>Client code has adapted these changes:</div></li></ul><div><span style="font-family: &quot;Source Code Pro&quot;;">class ModifiedFactoryMethodPatternExample {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      public static void main(String[] args) {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;***Modified Factory Pattern Demo***\n&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a Tiger Factory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             AnimalFactory tigerFactory =new TigerFactory();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a tiger using the Factory Method</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             Animal aTiger = tigerFactory.makeAnimal();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //aTiger.speak();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //aTiger.preferredAction();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a DogFactory</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             AnimalFactory dogFactory = new DogFactory();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             // Creating a dog using the Factory Method</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             Animal aDog = dogFactory.makeAnimal();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //aDog.speak();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">             //aDog.preferredAction();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">      }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div></td></tr></tbody></table><div><br/></div></div><div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>D:    What are the advantages of using a factory like this?</div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>R:</div><ul><li><div>You are separating code that can vary from the code that does not vary (i.e., the advantages of using a simple factory pattern is still present). This technique helps you easily maintain code.</div></li><li><div>Your code is not tightly coupled; so, you can add new classes like Lion, Beer, and so forth, at any time in the system without modifying the existing architecture. So, you have followed the “closed for modification but open for extension” principle.</div></li></ul></td></tr></tbody></table><div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>D:    What are the challenges of using a factory like this?<br/></div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>R:    If you need to deal with a large number of classes, then you may encounter maintenance overhead.<br/></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:    I see that the factory pattern is supporting two parallel hierarchies. Is this correct?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R: Good catch. Yes, from the class diagram (see Figure <a href="https://learning.oreilly.com/library/view/java-design-patterns/9781484240786/html/395506_2_En_4_Chapter.xhtml#Fig3">4-3</a>), it is evident that this pattern supports parallel class hierarchies.</div><div><img src="4- Factory Method Pattern_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; -webkit-font-smoothing: antialiased; border: 0px; height: 20.5em; max-width: 100%; vertical-align: middle; margin: 0px; padding: 2px;" width="765"/></div><div><br/></div><div>So, in this example, AnimalFactory, DogFactory, and TigerFactory are placed in one hierarchy, and Animal, Dog, and Tiger are placed in another hierarchy. So, the creators and their creations/products are two hierarchies running in parallel.</div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:    I should always mark the factory method with an abstract keyword so that subclasses can complete them. Is this correct?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div><span style="color: rgb(0, 0, 0); font-family: &quot;Segoe UI&quot;; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">R:     No. You may be interested in a default factory method if the creator has no subclasses. And in that case, you cannot mark the factory method with the abstract keyword.</span></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div><span style="font-weight: bold;">D:    </span><span style="font-weight: bold;">It still appears to me that the factory method pattern is not much different from simple factory. Is this correct?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R:     If you look at the subclasses in the examples in both chapters, you may find some similarities. But you should not forget the key aim of the factory method pattern is that it is supplying the framework through which different subclasses can make different products. But in a simple factory, you cannot vary the products like you can with the factory method pattern. Think of simple factory as a <span style="font-style: italic;">one-time deal</span> but most importantly, your creational part will not be closed for modification. Whenever you want to add a new stuff, you need to add an if/else block or a switch statement in the factory class of your simple factory pattern.</div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>D:    In the factory method pattern, I can simply use a subclassing mechanism (i.e., using inheritance) and then implement the factory method (that is defined in the parent class). Is this correct?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div>R:    The answer to this question is yes if you want to strictly follow the GoF definitions. But it is important to note that in many applications/implementations, there is no use of an abstract class or interface; for example, in Java, an XML reader object is used like this:</div><div><br/></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Some code before…</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">XMLReader xmlReader1 = XMLReaderFactory.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">createXMLReader</span><span style="font-family: &quot;Source Code Pro&quot;;">();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Some code after</span></div><div><br/></div><div>XMLReaderFactory is a final class in Java. So, you cannot inherit from it. But when you use SAXPaserFactory, as follows, you are using an abstract class SAXParserFactory.</div><div><br/></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//some code before….</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">SAXParserFactory factory = SAXParserFactory.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">newInstance</span><span style="font-family: &quot;Source Code Pro&quot;;">();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">SAXParser parser = factory.newSAXParser();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">XMLReader xmlReader2 = parser.getXMLReader();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Some code after</span></div></td></tr></tbody></table><div><br/></div></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><div><br/></div><div><br/></div><div><b><br/></b></div><div><br/></div><div><br/></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; -webkit-font-smoothing: antialiased; padding: 0px; font-size: 18.88px; margin-top: 0px; margin-bottom: 0px; text-indent: 0px; text-align: left; font-family: Cambria, &quot;Minion Pro&quot;, &quot;Times New Roman&quot;, Times, serif; color: rgb(51, 51, 51); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-right: 0px !important; margin-left: 0px !important; line-height: 1.65em !important;"></div><h2><span style="font-size: 14pt;"><br/></span></h2><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 