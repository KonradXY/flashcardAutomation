<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308716 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="400"/>

<div>
<span><div><div><span style="font-weight: bold;"><font style="font-size: 14pt;">2 - Prototype</font></span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-size: 10pt; font-weight: normal;">D:    What is the GoF Definition of a prototype ? When do we need  prototype ? Can you define the uml diagram of a prototype ?</span></div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-size: 10pt; font-weight: normal;">R: Specify the kinds of objects to create using a prototypical instance, and create new objects by copying this prototype.</span></div><div><span style="font-size: 10pt; font-weight: normal;">In general, creating a new instance from scratch is a costly operation. Using the prototype pattern, you can create new instances by copying or cloning an instance of an existing one.</span></div><div style="text-align: center;"><span style="font-weight: bold;"><img src="2 - Prototype Pattern_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" width="255"/></span></div></td></tr></tbody></table><div><h2><br/></h2></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-weight: bold;">D:</span>    can you give an implementation of the prototype pattern ?</div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-weight: bold;">R:</span>     here's the implementation:</div><div><span style="font-family: &quot;Source Code Pro&quot;;">//BasicCar.java</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">package jdp2e.prototype.demo;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">import java.util.Random;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">public abstract class BasicCar implements Cloneable</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public String modelName;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public int basePrice,onRoadPrice;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public String getModelname() {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       return modelName;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public void setModelname(String modelname) {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       this.modelName = modelname;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public static int setAdditionalPrice()</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       int price = 0;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       Random r = new Random();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       //We will get an integer value in the range 0 to 100000</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       int p = r.nextInt(100000);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       price = p;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       return price;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public BasicCar clone() throws CloneNotSupportedException</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       return  (BasicCar)super.clone();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Nano.java</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">package jdp2e.prototype.demo;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class Nano extends BasicCar</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   //A base price for Nano</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public int basePrice=100000;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public Nano(String m)</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       modelName = m;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   @Override</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public BasicCar clone() throws CloneNotSupportedException</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">        return (Nano)super.clone();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">        //return this.clone();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Ford.java</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">package jdp2e.prototype.demo;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">class Ford extends BasicCar</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   //A base price for Ford</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public int basePrice=100000;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public Ford(String m)</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       modelName = m;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   @Override</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public BasicCar clone() throws CloneNotSupportedException</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       return (Ford)super.clone();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div><div><br/></div><div><span style="font-family: &quot;Source Code Pro&quot;;">//Client</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">// PrototypePatternExample.java</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">package jdp2e.prototype.demo;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">public class PrototypePatternExample</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">{</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   public static void main(String[] args) throws CloneNotSupportedException</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   {</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;***Prototype Pattern Demo***\n&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       BasicCar nano = new Nano(&quot;Green Nano&quot;) ;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       nano.basePrice=100000;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       BasicCar ford = new Ford(&quot;Ford Yellow&quot;);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       ford.basePrice=500000;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       BasicCar bc1;</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       //Nano</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       bc1 =nano.clone();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       //Price will be more than 100000 for sure</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       bc1.onRoadPrice = nano.basePrice+BasicCar.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">setAdditionalPrice</span><span style="font-family: &quot;Source Code Pro&quot;;">();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Car is: &quot;+ bc1.modelName+&quot; and it's price is Rs.&quot;+bc1.onRoadPrice);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       //Ford</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       bc1 =ford.clone();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       //Price will be more than 500000 for sure</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       bc1.onRoadPrice = ford.basePrice+BasicCar.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">setAdditionalPrice</span><span style="font-family: &quot;Source Code Pro&quot;;">();</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">       System.</span><span style="font-family: &quot;Source Code Pro&quot;; font-style: italic;">out</span><span style="font-family: &quot;Source Code Pro&quot;;">.println(&quot;Car is: &quot;+ bc1.modelName+&quot; and it's price is Rs.&quot;+bc1.onRoadPrice);</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">   }</span></div><div><span style="font-family: &quot;Source Code Pro&quot;;">}</span></div></td></tr></tbody></table><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-weight: bold;">D:    What are the</span> <span style="font-weight: bold;">advantages</span> <span style="font-weight: bold;">of using prototype design patterns?</span></div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-weight: bold;">R:</span></div><ul><li><div>It is useful when creating an instance of a class is a complicated (or boring) process. Instead, you can focus on other key activities.</div></li><li><div>You can include or discard products at runtime.</div></li><li><div>You can create new instances at a cheaper cost.</div></li></ul></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div><span style="font-weight: bold;">D:</span>    <span style="font-weight: bold;">What are the</span> <span style="font-weight: bold;">challenges</span> <span style="font-weight: bold;">associated with using prototype design patterns?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 1134px; padding: 8px;"><div><span style="font-weight: bold;">R:    </span></div><ul><li><div>Each subclass needs to implement the cloning or copying mechanism.</div></li><li><div>Sometimes creating a copy from an existing instance is not simple. For example, implementing a cloning mechanism can be challenging if the objects under consideration do not support copying/cloning or if there are circular references. For example, in Java, a class with the clone() method needs to implement the Cloneable marker interface; otherwise, it will throw a CloneNotSupportedException.</div></li><li><div>In this example, I have used the clone() method that performs a shallow copy in Java. Following the convention, I obtained the returned object by calling super.clone().(If you want to learn more about this, put your cursor on the eclipse editor and go through the instructions). If you need a deep copy for your application, that can be expensive.</div></li></ul></td></tr></tbody></table><div><br/></div></div></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 1134px;"></col></colgroup><tbody><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div><span style="font-weight: bold;">D:    Can you please elaborate the difference between a shallow copy and a deep copy?</span></div></td></tr><tr><td style="width: 1134px; padding: 8px; border: 1px solid;"><div>R:     A <span style="font-style: italic;">shallow copy</span> creates a new object and then copies various field values from the original object to the new object. So, it is also known as a <span style="font-style: italic;">field-by-field copy</span> . If the original object contains any references to other objects as fields, then the references of those objects are copied into the new object, (i.e., you do not create the copies of those objects).</div><div>Let’s try to understand the mechanism with a simple diagram. Suppose we have an object, X1, and it has a reference to another object, Y1. Further assume that object Y1 has a reference to object Z1.</div><div style="text-align: center;"><img src="2 - Prototype Pattern_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; -webkit-font-smoothing: antialiased; border: 0px; height: 10.55em; max-width: 100%; vertical-align: middle; margin: 0px; padding: 2px;" width="482"/></div><div style="text-align: center;"><span style="font-style: italic; font-weight: bold;">Figure 2-4</span>Before shallow copy of the reference/s</div><div>Now, with the shallow copy of X1, a new object, X2, is created; it also has a reference to Y1.</div><div style="text-align: center;"><img src="2 - Prototype Pattern_files/Image [2].jpg" type="image/jpeg" data-filename="Image.jpg" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; -webkit-font-smoothing: antialiased; border: 0px; height: 19.1em; max-width: 100%; vertical-align: middle; margin: 0px; padding: 2px;" width="485"/></div><div style="text-align: center;"><span style="font-style: italic; font-weight: bold;">Figure 2-5</span>After the shallow copy of the reference</div><div style="text-align: center;"><br/></div><div>You have already seen the use of the clone() method in our implementation. It performs a shallow copy.</div><div>For a <span style="font-style: italic;">deep copy</span> of X1, a new object, X3, is created. X3 has a reference to new object Y3, which is actually a copy of Y1. Also, Y3, in turn, has a reference to another new object, Z3, which is a copy of Z1.</div><div style="text-align: center;"><img src="2 - Prototype Pattern_files/Image [3].jpg" type="image/jpeg" data-filename="Image.jpg" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; -webkit-font-smoothing: antialiased; border: 0px; height: 8.28em; max-width: 100%; vertical-align: middle; margin: 0px; padding: 2px;" width="393"/></div><div style="text-align: center;"><span style="font-style: italic; font-weight: bold;">Figure 2-6</span>After the deep copy of the reference</div><div><br/></div><div>In a deep copy, the new object is totally separated from the original one. Any changes made in one object should not be reflected on the other one. To create a deep copy in Java, you may need to override the clone() method and then proceed. Also, a deep copy is expensive because you need to create additional objects. A complete implementation of deep copy is presented in the “Q&amp;A Session” of Memento Pattern (Chapter <a href="https://learning.oreilly.com/library/view/java-design-patterns/9781484240786/html/395506_2_En_19_Chapter.xhtml">19</a>) in this book.</div><div><br/></div><div><span style="font-weight: bold;">D:    When do you choose a shallow copy over a deep copy (and vice versa)?</span></div><div>R:     A shallow copy is faster and less expensive. It is always better if your target object has the primitive fields only.</div><div>A deep copy is expensive and slow. But it is useful if your target object contains many fields that have references to other objects.</div></td></tr></tbody></table><div><br/></div></div></div><div><br/></div></span>
</div></body></html> 