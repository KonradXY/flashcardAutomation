<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308716 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="466"/>

<div>
<span><div><h2><span style="font-size: 14pt;"><b>13 - Visitor Pattern</b></span></h2><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="width: 846px; padding: 8px; border: 1px solid;"><div>D:    can you give the gof definition of the visitor pattern ?</div></td></tr><tr><td style="width: 846px; padding: 8px; border: 1px solid;"><div>R: Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates.</div><div><img src="13 - Visitor Pattern_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" width="408"/></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    can you define a simple implementation of the visitor pattern ?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>R: Here’s the implementation.</div><div><br/></div><div><font face="Source Code Pro">package jdp2e.visitor.demo;</font></div><div><font face="Source Code Pro">interface OriginalInterface</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   //The following method has a Visitor argument.</font></div><div><font face="Source Code Pro">   void acceptVisitor(Visitor visitor);</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">class MyClass implements OriginalInterface</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   //Here &quot;myInt&quot; is final.So, once initialized, it should not be changed.</font></div><div><font face="Source Code Pro">   private final int myInt;</font></div><div><font face="Source Code Pro">   public MyClass()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       myInt=5;//Initial or default value</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   public int getMyInt()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return myInt;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void acceptVisitor(Visitor visitor)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       visitor.visit(this);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">interface Visitor</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   //The method to visit MyClass</font></div><div><font face="Source Code Pro">   void visit(MyClass myClassObject);</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">class ConcreteVisitor implements Visitor</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void visit(MyClass myClassObject)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;Current value of myInt=&quot;+ myClassObject.getMyInt());</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;Visitor will make it double and display it.&quot;);</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;Current value of myInt=&quot;+ 2*myClassObject.getMyInt());</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;Exiting from Visitor.&quot;);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">public class VisitorPatternExample {</font></div><div><font face="Source Code Pro">   public static void main(String[] args) {</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;***Visitor Pattern Demo***\n&quot;);</font></div><div><font face="Source Code Pro">       Visitor visitor = new ConcreteVisitor();</font></div><div><font face="Source Code Pro">       MyClass myClass = new MyClass();</font></div><div><font face="Source Code Pro">       myClass.acceptVisitor(visitor);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">}</font></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    Can you give a complex example of the visitor pattern ?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>R: You have already seen a very simple example of the visitor design pattern. But you can exercise the true power of this design pattern when you combine it with the composite pattern (see Chapter <a href="https://learning.oreilly.com/library/view/java-design-patterns/9781484240786/html/395506_2_En_11_Chapter.xhtml">11</a>). So, let’s examine a scenario where you need to combine both the composite pattern and the visitor pattern.</div><div><img src="13 - Visitor Pattern_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" width="610"/></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    can you give a more complex implementation of the visitor pattern ?</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>R: </div><div>Here’s the modified implementation.</div><div><br/></div><div><font face="Source Code Pro">package jdp2e.visitor.modified.demo;</font></div><div><font face="Source Code Pro">import java.util.ArrayList;</font></div><div><font face="Source Code Pro">import java.util.List;</font></div><div><font face="Source Code Pro">interface Employee</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   void printStructures();</font></div><div><font face="Source Code Pro">   //The following method has a Visitor argument.</font></div><div><font face="Source Code Pro">   void acceptVisitor(Visitor visitor);</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">//Employees who have Subordinates</font></div><div><font face="Source Code Pro">class CompositeEmployee implements Employee</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   private String name;</font></div><div><font face="Source Code Pro">   private String dept;</font></div><div><font face="Source Code Pro">   //New field for this example.</font></div><div><font face="Source Code Pro">   //It is tagged with &quot;final&quot;, so visitor cannot modify it.</font></div><div><font face="Source Code Pro">   private final int  yearsOfExperience;</font></div><div><font face="Source Code Pro">   //The container for child objects</font></div><div><font face="Source Code Pro">   private List&lt;Employee&gt; controls;</font></div><div><font face="Source Code Pro">   // Constructor</font></div><div><font face="Source Code Pro">   public CompositeEmployee(String name,String dept, int experience)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       this.name = name;</font></div><div><font face="Source Code Pro">       this.dept = dept;</font></div><div><font face="Source Code Pro">       this.yearsOfExperience = experience;</font></div><div><font face="Source Code Pro">       controls = new ArrayList&lt;Employee&gt;();</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   public void addEmployee(Employee e)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       controls.add(e);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   public void removeEmployee(Employee e)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       controls.remove(e);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   // Gets the name</font></div><div><font face="Source Code Pro">   public String getName()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return name;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   // Gets the department name</font></div><div><font face="Source Code Pro">   public String getDept()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return dept;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   // Gets the yrs. of experience</font></div><div><font face="Source Code Pro">   public int getExperience()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return yearsOfExperience;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   public List&lt;Employee&gt; getControls()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return this.controls;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void printStructures()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;\t&quot; + getName() + &quot; works in  &quot; + getDept() + &quot; Experience :&quot; + getExperience() + &quot; years&quot;);</font></div><div><font face="Source Code Pro">       for(Employee e: controls)</font></div><div><font face="Source Code Pro">       {</font></div><div><font face="Source Code Pro">           e.printStructures();</font></div><div><font face="Source Code Pro">       }</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void acceptVisitor(Visitor visitor)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       visitor.visitTheElement(this);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">class SimpleEmployee implements Employee</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   private String name;</font></div><div><font face="Source Code Pro">   private String dept;</font></div><div><font face="Source Code Pro">   //New field for this example</font></div><div><font face="Source Code Pro">   private int yearsOfExperience;</font></div><div><font face="Source Code Pro">   //Constructor</font></div><div><font face="Source Code Pro">   public SimpleEmployee(String name, String dept, int experience)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       this.name = name;</font></div><div><font face="Source Code Pro">       this.dept = dept;</font></div><div><font face="Source Code Pro">       this.yearsOfExperience = experience;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   // Gets the name</font></div><div><font face="Source Code Pro">   public String getName()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return name;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   // Gets the department name</font></div><div><font face="Source Code Pro">   public String getDept()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return this.dept;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   // Gets the yrs. of experience</font></div><div><font face="Source Code Pro">   public int getExperience()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       return yearsOfExperience;</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void printStructures()</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;\t\t&quot; + getName() + &quot; works in  &quot; + getDept() + &quot; Experience :&quot; + getExperience() + &quot; years&quot;);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void acceptVisitor(Visitor visitor)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       visitor.visitTheElement(this);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">interface Visitor</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   void visitTheElement(CompositeEmployee employees);</font></div><div><font face="Source Code Pro">   void visitTheElement(SimpleEmployee employee);</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">class ConcreteVisitor implements Visitor</font></div><div><font face="Source Code Pro">{</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void visitTheElement(CompositeEmployee employee)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       //We'll promote them if experience is greater than 15 years</font></div><div><font face="Source Code Pro">       boolean eligibleForPromotion = employee.getExperience() &gt; 15 ? true : false;</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;\t\t&quot; + employee.getName() + &quot; from  &quot; + employee.getDept() + &quot; is eligible for promotion? &quot; + eligibleForPromotion);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">   @Override</font></div><div><font face="Source Code Pro">   public void visitTheElement(SimpleEmployee employee)</font></div><div><font face="Source Code Pro">   {</font></div><div><font face="Source Code Pro">       //We'll promote them if experience is greater than 12 years</font></div><div><font face="Source Code Pro">       boolean eligibleForPromotion = employee.getExperience() &gt; 12 ? true : false;</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;\t\t&quot; + employee.getName() + &quot; from  &quot; + employee.getDept() + &quot; is eligible for promotion? &quot; + eligibleForPromotion);</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">}</font></div><div><font face="Source Code Pro">public class ModifiedVisitorPatternExample {</font></div><div><font face="Source Code Pro">   public static void main(String[] args) {</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;***Visitor Pattern combined with Composite Pattern Demo***\n&quot;);</font></div><div><font face="Source Code Pro">       /*2 teachers other than HOD works in</font></div><div><font face="Source Code Pro">        Mathematics department*/</font></div><div><font face="Source Code Pro">       SimpleEmployee mathTeacher1 = new SimpleEmployee(&quot;Math Teacher-1&quot;,&quot;Maths&quot;,13);</font></div><div><font face="Source Code Pro">       SimpleEmployee mathTeacher2 = new SimpleEmployee(&quot;Math Teacher-2&quot;,&quot;Maths&quot;,6);</font></div><div><font face="Source Code Pro">       /* 3 teachers other than HOD works in</font></div><div><font face="Source Code Pro">         Computer Sc. department*/</font></div><div><font face="Source Code Pro">       SimpleEmployee cseTeacher1 = new SimpleEmployee(&quot;CSE Teacher-1&quot;,&quot;Computer Sc.&quot;,10);</font></div><div><font face="Source Code Pro">       SimpleEmployee cseTeacher2 = new SimpleEmployee(&quot;CSE Teacher-2&quot;, &quot;Computer Sc.&quot;,13);</font></div><div><font face="Source Code Pro">       SimpleEmployee cseTeacher3 = new SimpleEmployee(&quot;CSE Teacher-3&quot;, &quot;Computer Sc.&quot;,7);</font></div><div><font face="Source Code Pro">       //The College has 2 Head of Departments-One from Mathematics, One from Computer Sc.</font></div><div><font face="Source Code Pro">       CompositeEmployee hodMaths = new CompositeEmployee(&quot;Mrs.S.Das(HOD-Maths)&quot;,&quot;Maths&quot;,14);</font></div><div><font face="Source Code Pro">       CompositeEmployee hodCompSc = new CompositeEmployee(&quot;Mr. V.Sarcar(HOD-CSE)&quot;, &quot;Computer Sc.&quot;,16);</font></div><div><font face="Source Code Pro">       //Principal of the college</font></div><div><font face="Source Code Pro">       CompositeEmployee principal = new CompositeEmployee(&quot;Dr.S.Som(Principal)&quot;,&quot;Planning-Supervising-Managing&quot;,20);</font></div><div><font face="Source Code Pro">       //Teachers of Mathematics directly reports to HOD-Maths</font></div><div><font face="Source Code Pro">       hodMaths.addEmployee(mathTeacher1);</font></div><div><font face="Source Code Pro">       hodMaths.addEmployee(mathTeacher2);</font></div><div><font face="Source Code Pro">       //Teachers of Computer Sc. directly reports to HOD-CSE</font></div><div><font face="Source Code Pro">       hodCompSc.addEmployee(cseTeacher1);</font></div><div><font face="Source Code Pro">       hodCompSc.addEmployee(cseTeacher2);</font></div><div><font face="Source Code Pro">       hodCompSc.addEmployee(cseTeacher3);</font></div><div><font face="Source Code Pro">       /*Principal is on top of college.HOD -Maths and Comp. Sc directly reports to him */</font></div><div><font face="Source Code Pro">       principal.addEmployee(hodMaths);</font></div><div><font face="Source Code Pro">       principal.addEmployee(hodCompSc);</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;\n Testing the overall structure&quot;);</font></div><div><font face="Source Code Pro">       //Prints the complete structure</font></div><div><font face="Source Code Pro">       principal.printStructures();</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;\n***Visitor starts visiting our composite structure***\n&quot;);</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;---The minimum criteria for promotion is as follows ---&quot;);</font></div><div><font face="Source Code Pro">       System.<span style="font-style: italic;">out</span>.println(&quot;--Junior Teachers-12 years and Senior teachers-15 years.--\n&quot;);</font></div><div><font face="Source Code Pro">       Visitor myVisitor = new ConcreteVisitor();</font></div><div><font face="Source Code Pro">       /*</font></div><div><font face="Source Code Pro">        * At first, we are building a container for employees who will be considered for promotion .</font></div><div><font face="Source Code Pro">        Principal is holding the highest position.So, he is not considered for promotion.</font></div><div><font face="Source Code Pro">        */</font></div><div><font face="Source Code Pro">       List&lt;Employee&gt; employeeContainer= new ArrayList&lt;Employee&gt;();</font></div><div><font face="Source Code Pro">       //For employees who directly reports to Principal</font></div><div><font face="Source Code Pro">       for (Employee e : principal.getControls())</font></div><div><font face="Source Code Pro">       {</font></div><div><font face="Source Code Pro">           employeeContainer.add(e);</font></div><div><font face="Source Code Pro">       }</font></div><div><font face="Source Code Pro">       //For employees who directly reports to HOD-Maths</font></div><div><font face="Source Code Pro">       for (Employee e : hodMaths.getControls())</font></div><div><font face="Source Code Pro">       {</font></div><div><font face="Source Code Pro">           employeeContainer.add(e);</font></div><div><font face="Source Code Pro">       }</font></div><div><font face="Source Code Pro">       //For employees who directly reports to HOD-Comp.Sc</font></div><div><font face="Source Code Pro">       for (Employee e : hodCompSc.getControls())</font></div><div><font face="Source Code Pro">       {</font></div><div><font face="Source Code Pro">           employeeContainer.add(e);</font></div><div><font face="Source Code Pro">       }</font></div><div><font face="Source Code Pro">       //Now visitor can traverse through the container.</font></div><div><font face="Source Code Pro">       for (Employee e :employeeContainer)</font></div><div><font face="Source Code Pro">       {</font></div><div><font face="Source Code Pro">           e.acceptVisitor(myVisitor);</font></div><div><font face="Source Code Pro">       }</font></div><div><font face="Source Code Pro">   }</font></div><div><font face="Source Code Pro">}</font></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">When should you consider implementing visitor design patterns?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>R: You need to add new operations to a set of objects without changing their corresponding classes. It is one of the primary aims to implement a visitor pattern. When the operations change very often, this approach can be your savior. In this pattern, encapsulation is not the primary concern.<br/></div><div>If you need to change the logic of various operations, you can simply do it through visitor implementation.</div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">Are there any drawbacks associated with this pattern?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div><b>R: </b></div><ul><li><div>Encapsulation is not its key concern. So, you can break the power of encapsulation by using visitors.</div></li><li><div>If you need to frequently add new concrete classes to an existing architecture, the visitor hierarchy becomes difficult to maintain. For example, suppose you want to add another concrete class in the original hierarchy now. Then in this case, you need to modify visitor class hierarchy accordingly to fulfill the purpose.</div></li></ul></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">Why are you saying that a visitor class can violate the encapsulation?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div><b>R: </b>In our illustration, I have tested a very simple visitor design pattern in which I show an updated integer value of myInt through the visitor class. Also, in many cases, you may see that the visitor needs to move around a composite structure to gather information from them, and then it can modify that information. So, when you provide this kind of support, you violate the core aim of encapsulation.</div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">Why does this pattern compromise the encapsulation?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div><b>R: </b>Here you perform some operations on a set of objects that can be heterogeneous. But your constraint is that you cannot change their corresponding classes. So, your visitor needs a way to access the members of these objects. As a result, you need to expose the information to the visitor.</div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">In the visitor interfaces of the modified implementation, you are using the concept of method overloading ( i.e., method names are same). Is this mandatory?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>R: No. In my book <span style="font-style: italic;">Design Patterns in C#</span>, I used method names like VisitCompositeElement() and VisitLeafNode() in a similar context. Remember that these interface methods should target the specific classes, such as SimpleEmployee or CompositeEmployee.<br/></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">Suppose that in the modified implementation, I add a concrete subclass of Employee called UndefinedEmployee. How should I proceed? Should I have another specific method in the visitor interface?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div><b>R: </b>Exactly. You need to define a new method that is specific to this new class. So, your interface may look like the following.</div><div><span style="font-weight: bold;">interface</span> Visitor</div><div>{</div><div>   <span style="font-weight: bold;">void</span> visitTheElement(CompositeEmployee employees);</div><div>   <span style="font-weight: bold;">void</span> visitTheElement(SimpleEmployee employee);</div><div>   <span style="font-weight: bold;">void</span> visitTheElement(UndefinedEmployee employee);</div><div>}</div><div>And later you need to implement this new method in the concrete visitor class.</div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">In the client code, you made a container of employees first, and then it starts visiting. Is it mandatory to create such a structure?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div><b>R: </b>No. It just helps clients to visit smoothly in one shot. If you do not create any such structure, you can always call it separately.</div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 846px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div>D:    <span style="font-weight: bold;">Suppose that I need to support new operations in the existing architecture. How should I proceed with the visitor pattern?</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 846px; padding: 8px;"><div><b>R: </b>For each new operation, create a new visitor subclass and implement the operation in it. Then, visit your existing structure the way that was shown in the preceding examples.</div></td></tr></tbody></table><div><br/></div></div></div><div><br/></div></span>
</div></body></html> 